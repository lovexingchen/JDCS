C51 COMPILER V9.56.0.0   MAIN                                                              05/28/2018 11:09:02 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <stc15.h>
   2          #include <intrins.h>
   3          #include <stdio.h>
   4          #include ".\USART\USART.h"
   5          #include ".\AD\ADzh.h"
   6          #include ".\systick\systick.h"
   7          #include ".\DHT11\DHT11.h"
   8          #include ".\BH1750\BH1750.h"
   9          
  10          char voltage[10],illumination[20];
  11          char tem[10],hum[10];
  12          
  13          void main()
  14          { 
  15   1      //  P3M0 |= 0X40;
  16   1      //  P3M1 |= 0X00;
  17   1        
  18   1        
  19   1        InitADC();
  20   1        UartInit(); 
  21   1        Init_BH1750();       //初始化BH1750
  22   1        Delay1ms(1000);
  23   1        
  24   1        while(1) 
  25   1        {   
  26   2          Delay1ms(500);
  27   2          UartInit_fk("即将进入掉电模式\r\n");
  28   2          PCON = 0X02;  //单片机进入掉电模式
  29   2          _nop_;
*** WARNING C275 IN LINE 29 OF main.c: expression with possibly no effect
  30   2          _nop_;
*** WARNING C275 IN LINE 30 OF main.c: expression with possibly no effect
  31   2          _nop_;
*** WARNING C275 IN LINE 31 OF main.c: expression with possibly no effect
  32   2          
  33   2          /**************************************
  34   2          查询DHT11数据
  35   2          **************************************/
  36   2          Delay1ms(500);
  37   2          if(Dht11_ReadTemHumi() == 1)
  38   2          {
  39   3            sprintf(tem,"%d\r\n",temp_value);
  40   3            sprintf(hum,"%d\r\n",humi_value);
  41   3            UartInit_fk(tem);
  42   3            UartInit_fk(hum);
  43   3          }
  44   2          else UartInit_fk("DHT11查询失败\r\n");
  45   2          
  46   2          /**************************************
  47   2          查询ADC数据  电池电压
  48   2          **************************************/
  49   2          Delay1ms(500);
  50   2          EADC = 1;     //为避免冲突在使用ADC时在开启中断   
  51   2          sprintf(voltage,"%.3f\r\n",V);
C51 COMPILER V9.56.0.0   MAIN                                                              05/28/2018 11:09:02 PAGE 2   

  52   2          UartInit_fk(voltage);
  53   2          EADC = 0;     //为避免冲突不使用ADC时在关闭中断 
  54   2          
  55   2          /**************************************
  56   2          查询BH1750数据 光照强度
  57   2          **************************************/
  58   2          Delay1ms(500);
  59   2          Single_Write_BH1750(0x01);   // power on
  60   2          Single_Write_BH1750(0x10);   // H- resolution mode
  61   2      
  62   2          Delay1ms(180);              //延时180ms
  63   2      
  64   2          Multiple_Read_BH1750();       //连续读出数据，存储在BUF中
  65   2      
  66   2          dis_data=BUF[0];
  67   2          dis_data=(dis_data<<8)+BUF[1];//合成数据，即光照数据   
  68   2          temp=(float)dis_data/1.2;
  69   2          sprintf(illumination,"%.3f\r\n",temp);
  70   2          UartInit_fk(illumination);  
  71   2          
  72   2          if(V*2 < 6)
  73   2          {
  74   3            
  75   3            //单片机进入休眠模式不在发送数据
  76   3          }
  77   2        }
  78   1              
  79   1      
  80   1      }
  81          
  82          
  83          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    310    ----
   CONSTANT SIZE    =     47    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     50    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
